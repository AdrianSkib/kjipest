(this["webpackJsonpkjipest-app"]=this["webpackJsonpkjipest-app"]||[]).push([[0],{100:function(e,t,n){e.exports=n(192)},105:function(e,t,n){},107:function(e,t,n){},189:function(e,t,n){e.exports=n.p+"static/media/rain.48c54bc9.svg"},190:function(e,t,n){e.exports=n.p+"static/media/partlycloudy.4330cc36.svg"},191:function(e,t,n){e.exports=n.p+"static/media/logo.4e7d8046.svg"},192:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(16),l=n.n(i),c=(n(105),n(32)),s=n.n(c),o=n(60),d=n(89),u=n(90),m=n(99),h=n(97),p=(n(107),n(61)),v=n.n(p),g=n(98),E=n(41),f=n(95),w=(n(185),n(96)),x=n.n(w),y=function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).listRef=r.a.createRef(),e.Row=function(t){var a=t.index,i=t.style;return e.state.flipList&&(a=e.state.data.length-a-3>0?e.state.data.length-a-3:0),r.a.createElement("div",{id:"listelement",style:i},r.a.createElement("div",{className:"elementelement",id:"rank"},a+1),r.a.createElement("div",{className:"elementelement",id:"location"},e.state.data[a].location),r.a.createElement("div",{className:"elementelement",id:"score"},e.state.data[a].kjipestScore.toFixed(2)),r.a.createElement("div",{className:"elementelement",id:"icon"},r.a.createElement("img",{src:n(189),alt:""})))},e.onSelect=function(t,n){e.state.flipList?e.listRef.current.scrollToItem(e.state.data.length-n.index-3,"start"):e.listRef.current.scrollToItem(n.index,"start"),e.setState({searchingFor:t})},e.renderItem=function(e){return r.a.createElement("div",{className:"searchItem"},e.location)},e.renderMenu=function(t,n,a){e.cellHeightCache.clearAll();return r.a.createElement(E.c,{rowHeight:e.cellHeightCache.rowHeight,height:207,rowCount:t.length,rowRenderer:function(n){var a=n.key,i=n.index,l=n.parent,c=n.style,s=t[i];return r.a.createElement(E.a,{cache:e.cellHeightCache,key:a,parent:l,rowIndex:i},r.a.cloneElement(s,{style:c,key:a,onMouseEnter:null,onMouseDown:function(e){0===e.button&&s.props.onClick(e)}}))},width:a.minWidth||0,style:{height:"auto",maxHeight:"207px"}})},e.cellHeightCache=new E.b({defaultHeight:42,fixedWidth:!0}),e.state={data:[],searchingFor:"",gotData:!1,currentLoc:"Select location",currentIndex:-1,currentScore:-1,flipList:!1,orderText:"Kjipest \u2013 Minst kjipt \u2193",locData:{},hasPos:!1,lat:"",lon:""},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark((function e(){var t,n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://kjipest.no/sorted");case 2:return t=e.sent,e.next=5,t.data;case 5:if(n=e.sent,a=n.map((function(e,t){return e.index=t,e})),this.setState({data:a,gotData:!0}),document.getElementById("main").style.height=window.innerHeight-160+"px",document.getElementById("list").style.width=window.innerWidth-300+"px",document.getElementById("categories").style.width=window.innerWidth-300+"px",!navigator.geolocation){e.next=19;break}return r=function(){var e=Object(o.a)(s.a.mark((function e(t){var n,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://kjipest.no/lonlat/"+t.coords.longitude+"&"+t.coords.latitude);case 2:return n=e.sent,e.next=5,n.data;case 5:r=e.sent,i=a.find((function(e){return e.location===r.location})),this.setState({locData:r,currentLoc:r.location,currentIndex:i.index,currentScore:r.kjipestScore}),this.setState({lat:t.coords.latitude,lon:t.coords.longitude,hasPos:!0});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.next=19,navigator.geolocation.getCurrentPosition(r.bind(this));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"KjipestList",value:function(){var e=this;return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{flex:"1 1 auto",height:"100vh"}},r.a.createElement(f.a,null,(function(t){var n=t.height,a=t.width;return r.a.createElement(g.a,{className:"List",height:n,itemCount:e.state.data.length,itemSize:80,width:a,ref:e.listRef,itemData:e.state.flipList},e.Row)}))))}},{key:"renderPage",value:function(){var e=this,t=this.state.searchingFor,a=t?this.state.data.filter((function(e){return e.location.toLowerCase().includes(t.toLowerCase())})):[];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav",id:"search"},r.a.createElement(x.a,{items:a,value:this.state.searchingFor,renderItem:this.renderItem,renderMenu:this.renderMenu,getItemValue:function(e){return e.location},onChange:function(t,n){return e.setState({searchingFor:n})},onSelect:this.onSelect,inputProps:{placeholder:"s\xf8k"}})),r.a.createElement("div",{className:"nav",id:"navlist"},r.a.createElement("h2",null,"Liste")),r.a.createElement("div",{className:"nav"},r.a.createElement("h2",null,"Kart")),r.a.createElement("div",{className:"nav"},r.a.createElement("h2",null,"Info")))),r.a.createElement("div",{className:"subheader"},r.a.createElement("div",{id:"categories"},r.a.createElement("div",{className:"head",id:"crank"},r.a.createElement("h3",null,"Rangering")),r.a.createElement("div",{className:"head",id:"cloc"},r.a.createElement("h3",null,"Sted")),r.a.createElement("div",{className:"head",id:"cscore"},r.a.createElement("h3",{onClick:function(){e.state.flipList?(e.setState({orderText:"Kjipest \u2013 Minst kjipt \u2193",flipList:!1}),e.listRef.current.scrollToItem(0,"start")):(e.setState({orderText:"Kjipest \u2013 Minst kjipt \u2191",flipList:!0}),e.listRef.current.scrollToItem(0,"start"))}},this.state.orderText)),r.a.createElement("div",{className:"head",id:"cicon"},r.a.createElement("h3",null,"V\xe6rtyper"))),r.a.createElement("div",{id:"locName"},r.a.createElement("p",null,this.state.currentLoc),r.a.createElement("h3",null,"(Din posisjon)"))),r.a.createElement("div",{id:"main"},r.a.createElement("div",{id:"list"},this.KjipestList()),r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"localinfo"},r.a.createElement("div",{id:"localscore"},r.a.createElement("h3",null,"Score:"),r.a.createElement("h1",null,this.state.currentScore.toFixed(2))),r.a.createElement("img",{src:n(190),alt:""}),r.a.createElement("div",{className:"localrank"},r.a.createElement("h3",null,"Rangering:"),r.a.createElement("h1",null,this.state.currentIndex))),r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:n(191),alt:""})))),r.a.createElement("script",{type:"text/javascript",src:"./script.js"}))}},{key:"useEffect",value:function(){function e(){document.getElementById("main").style.height=window.innerHeight-160+"px",document.getElementById("list").style.width=window.innerWidth-300+"px",document.getElementById("categories").style.width=window.innerWidth-300+"px",window.addEventListener("resize",e)}return function(t){window.removeEventListener("resize",e)}}},{key:"render",value:function(){return this.state.gotData?r.a.createElement("div",null,this.renderPage()):r.a.createElement("div",null)}}]),a}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[100,1,2]]]);
//# sourceMappingURL=main.9d51ff50.chunk.js.map